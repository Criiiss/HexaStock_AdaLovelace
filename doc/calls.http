### This file contains HTTP requests for testing the portfolio management API.
###
POST http://localhost:8081/api/portfolios
Content-Type: application/json

{
  "ownerName": "Rachel Green"
}
> {%
    client.log(response.body);
    try {
        // Check if response.body is already an object or a string
        const responseBody = typeof response.body === 'string'
            ? JSON.parse(response.body)
            : response.body;

        client.global.set("portfolioId", responseBody.id);
        client.log("Portfolio ID set to: " + responseBody.id);
    } catch (e) {
        client.log("Error handling response: " + e.message);
        client.log("Response type: " + typeof response.body);
    }
%}
###
GET http://localhost:8081/api/portfolios/{{portfolioId}}
# Expected response (PortfolioResponseDTO):
# {
#   "id": "abc123",
#   "ownerName": "Rachel Green",
#   "balance": 1000000.00,
#   "createdAt": "2024-06-01T12:34:56"
# }

###
POST http://localhost:8081/api/portfolios/{{portfolioId}}/deposits
Content-Type: application/json

{
  "amount": "1000000"
}

###
POST http://localhost:8081/api/portfolios/{{portfolioId}}/withdrawals
Content-Type: application/json

{
  "amount": "900000"
}

###
POST http://localhost:8081/api/portfolios/{{portfolioId}}/purchases
Content-Type: application/json

{
  "ticker": "GRF",
  "quantity": 20
}

###
POST http://localhost:8081/api/portfolios/{{portfolioId}}/purchases
Content-Type: application/json

{
  "ticker": "AAPL",
  "quantity": 10
}


###
POST http://localhost:8081/api/portfolios/{{portfolioId}}/sales
Content-Type: application/json

{
  "ticker": "AAPL",
  "quantity": 10
}

###
GET http://localhost:8081/api/portfolios/{{portfolioId}}/transactions

###
GET http://localhost:8081/api/portfolios/{{portfolioId}}/holdings


### Create a watchlist
POST http://localhost:8080/api/watchlists
Content-Type: application/json

{
  "ownerName": "John Doe",
  "name": "Tech Growth"
}

### Add entry to watchlist (replace {watchlistId} with actual ID)
POST http://localhost:8080/api/watchlists/{watchlistId}/entries
Content-Type: application/json

{
  "ticker": "AAPL",
  "thresholdPrice": 150.00,
  "currency": "USD"
}

### Add another entry
POST http://localhost:8080/api/watchlists/{watchlistId}/entries
Content-Type: application/json

{
  "ticker": "MSFT",
  "thresholdPrice": 300.00,
  "currency": "USD"
}

### Get watchlist by ID
GET http://localhost:8080/api/watchlists/{watchlistId}

### Get all watchlists for owner
GET http://localhost:8080/api/watchlists?owner=John Doe

### Remove an entry (replace {entryId} with actual ID)
DELETE http://localhost:8080/api/watchlists/{watchlistId}/entries/{entryId}

### Delete watchlist
DELETE http://localhost:8080/api/watchlists/{watchlistId}